# Домашнее задание к занятию «Базы данных, их типы» "Петровский А.А"

### Задание 1
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

Приведите ответ в свободной форме.

## Ответ

1.1. Бюджетирование проектов
Для бюджетирования проектов с формированием финансовых отчетов и прогнозированием рисков лучше всего подойдет реляционная СУБД (PostgreSQL, MySQL, Oracle, SQL Server).
Почему:
Гарантирует целостность данных через ограничения (constraints)
Поддерживает сложные транзакции (ACID)
Позволяет создавать четкую структуру данных с нормализацией
Отлично подходит для аналитических запросов и отчетов
Поддерживает сложные математические вычисления для прогнозирования

1.1.* Ускорение хеширования
Для ускорения хеширования можно использовать:
Redis API - для кэширования хэш-таблиц в памяти
Memcached API - для распределенного кэширования
GPU-ускорение через CUDA API для параллельного хеширования
Hardware Security Module (HSM) API - для аппаратного ускорения криптографических операций

1.2. Лендинги и CRM
Для лендингов лучше использовать документоориентированную СУБД (MongoDB, CouchDB), а для CRM - реляционную или документоориентированную.
Почему:
Лендинги: гибкая схема для разных форм, быстрая вставка данных
CRM: возможность хранения структурированных и неструктурированных данных, быстрые запросы

1.2.* Одна СУБД для обеих задач
Да, можно. Рекомендую MongoDB с реализацией:
Использовать разные коллекции для лендингов и CRM
Создать индексы для ускорения поиска по лидам
Реализовать шардирование для горизонтального масштабирования
Использовать агрегационный конвейер для аналитики

1.3. База знаний по корпоративным нормам
Лучше всего подойдет реляционная СУБД или документоориентированная.
Почему:
Простая и понятная структура (разделы, подразделы, документы)
Легкость навигации по иерархии
Возможность быстрого поиска по содержимому

1.3.* Использование существующей СУБД
Да, можно использовать СУБД из п.1.1 (реляционную). Реализация:
Создать отдельную схему/базу для базы знаний
Использовать иерархические запросы (CTE) для навигации
Реализовать полнотекстовый поиск для документов
Создать представления для разных уровней доступа

1.4. Логистика и маршрутизация
Для логистики лучше всего подойдет графовая СУБД (Neo4j, Amazon Neptune, ArangoDB).
Почему:
Быстрая работа со связями (рёбра графа)
Эффективные алгоритмы поиска кратчайших путей
Легкость добавления новых узлов и связей
Оптимизация для задач маршрутизации

1.4.* Подключение отдела закупок
Можно подключить отдел закупок к той же графовой СУБД, если:
Структуры данных совместимы (поставщики как узлы, связи как ребра)
Требуется анализ взаимосвязей между закупками и логистикой
Необходимы комплексные отчеты по цепочке поставок
В противном случае лучше создать отдельную реляционную СУБД для закупок и интегрировать через API.

1.5.* Одна СУБД для всех задач
Теоретически можно, но не рекомендуется. Если все же необходимо:
Мультимодельная СУБД (ArangoDB, OrientDB, Cosmos DB)
PostgreSQL с расширениями (PostGIS для логистики, JSONB для CRM)
Но это создаст проблемы:
Сложность администрирования
Компромиссы в производительности
Трудности с масштабированием

### Задание 2
2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

## Ответ
2.1. Пополнение баланса телефона 
Аутентификация пользователя - проверка прав доступа к счету
Проверка достаточности средств - на счете источника достаточно денег
Блокировка счетов - установка блокировок на оба счета для предотвращения конфликтов
Списание средств - уменьшение баланса источника на сумму пополнения
Зачисление средств - увеличение баланса телефона на сумму пополнения
Фиксация транзакции - запись в журнал и снятие блокировок

2.1.* Автоплатеж
Шаги для автоплатежа:
Проверка условий автоплатежа - дата, минимальный баланс
Уведомление пользователя - отправка подтверждения о списании
Логирование операции - запись в историю автоплатежей
Обработка ошибок - повторная попытка при неудаче
Отключение автоплатежа - при многократных неудачных попытках
### Задание 3
3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

Приведите ответ в свободной форме.

## Ответ
3.1. Пять преимуществ SQL-систем
Целостность данных - строгие ограничения (constraints), внешние ключи
Транзакционность (ACID) - гарантия атомарности, согласованности, изолированности, долговечности
Стандартизированный язык запросов - мощный и универсальный SQL
Многолетняя зрелость - стабильность, обширная документация, большое сообщество
Сложные запросы - поддержка сложных джойнов, подзапросов, оконных функций.

3.1.* Преимущества NewSQL
Масштабируемость - горизонтальное масштабирование как у NoSQL
Совместимость с SQL - привычный синтаксис и инструменты
ACID-гарантии - сохранение транзакционности при распределении
Автоматическое шардирование - прозрачное распределение данных
Высокая доступность - встроенная отказоустойчивость и репликация

### Задание 4
Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

Приведите ответ в свободной форме.

## Ответ
Критерии выбора СУБД для 1000 машин.

Основные критерии:
Горизонтальная масштабируемость - способность распределять нагрузку.
Отказоустойчивость - работа при выходе из строя узлов.
Производительность - скорость обработки запросов.
Стоимость владения - лицензирование, администрирование.
Экосистема - инструменты для мониторинга и управления.
Оптимальная модель распределенных вычислений.
Лучше всего подойдет: MapReduce или Apache Spark.

Почему:
Параллельная обработка - эффективное использование всех 1000 машин.
Отказоустойчивость - автоматическое восстановление при сбоях.
Гибкость - поддержка различных типов вычислений.
Оптимизация - автоматическое распределение данных и вычислений.
Экосистема - богатый набор инструментов для анализа данных.
Рекомендуемая СУБД: Apache Cassandra или HBase с интеграцией через Apache Spark.

Это обеспечит:
Высокую производительность обработки.
Отказоустойчивость кластера.
Простоту масштабирования.
Эффективное использование ресурсов всех 1000 машин.